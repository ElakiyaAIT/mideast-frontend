# ğŸ—ï¸ API Loader System - Architecture Overview

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APPLICATION ARCHITECTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 1: UI COMPONENTS (What Users See)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ GlobalLoader â”‚  â”‚SkeletonCard  â”‚  â”‚SectionLoader â”‚  â”‚InlineSpinner â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â”‚  Full Page   â”‚  â”‚  Content     â”‚  â”‚   Overlay    â”‚  â”‚    Tiny      â”‚  â”‚
â”‚  â”‚   Blocker    â”‚  â”‚ Placeholder  â”‚  â”‚   On Section â”‚  â”‚  Indicator   â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                 â”‚                 â”‚                 â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                   â”‚                                        â”‚
â”‚                                   â–¼                                        â”‚
â”‚                         Reads from Redux State                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                   â”‚
                                   â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 2: STATE MANAGEMENT (Redux Store)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                       â”‚    loaderSlice.ts     â”‚                            â”‚
â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚                       â”‚ State:                â”‚                            â”‚
â”‚                       â”‚ â€¢ isGlobalLoading     â”‚                            â”‚
â”‚                       â”‚ â€¢ globalMessage       â”‚                            â”‚
â”‚                       â”‚ â€¢ activeRequests{}    â”‚                            â”‚
â”‚                       â”‚ â€¢ scopedLoaders{}     â”‚                            â”‚
â”‚                       â”‚                       â”‚                            â”‚
â”‚                       â”‚ Actions:              â”‚                            â”‚
â”‚                       â”‚ â€¢ startRequest        â”‚â—„â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                       â”‚ â€¢ endRequest          â”‚       â”‚                    â”‚
â”‚                       â”‚ â€¢ showGlobalLoader    â”‚       â”‚                    â”‚
â”‚                       â”‚ â€¢ hideGlobalLoader    â”‚       â”‚                    â”‚
â”‚                       â”‚ â€¢ setScopedLoader     â”‚       â”‚                    â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                    â”‚
â”‚                                   â–²                   â”‚                    â”‚
â”‚                                   â”‚                   â”‚                    â”‚
â”‚                       Dispatches actions              â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                   â”‚
                                   â”‚                   â”‚
                                   â–¼                   â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 3: API INTERCEPTOR (Automatic Tracking)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                   â”‚ apiLoaderInterceptor.ts     â”‚                          â”‚
â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
â”‚                   â”‚                             â”‚                          â”‚
â”‚  Setup (main.tsx) â”‚  REQUEST INTERCEPTOR        â”‚                          â”‚
â”‚       â”‚           â”‚  ==================          â”‚                          â”‚
â”‚       â”‚           â”‚  1. Check loader config     â”‚                          â”‚
â”‚       â”‚           â”‚  2. Generate request ID     â”‚                          â”‚
â”‚       â”‚           â”‚  3. Dispatch startRequest â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â”‚           â”‚                             â”‚                          â”‚
â”‚       â”‚           â”‚  RESPONSE INTERCEPTOR       â”‚                          â”‚
â”‚       â”‚           â”‚  ===================         â”‚                          â”‚
â”‚       â”‚           â”‚  1. Get request ID          â”‚                          â”‚
â”‚       â”‚           â”‚  2. Dispatch endRequest â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â”‚           â”‚  3. Cleanup                 â”‚                          â”‚
â”‚       â”‚           â”‚                             â”‚                          â”‚
â”‚       â”‚           â”‚  HELPERS                    â”‚                          â”‚
â”‚       â”‚           â”‚  ========                   â”‚                          â”‚
â”‚       â”‚           â”‚  â€¢ enableGlobalLoader()     â”‚                          â”‚
â”‚       â”‚           â”‚  â€¢ disableLoader()          â”‚                          â”‚
â”‚       â”‚           â”‚  â€¢ withLoader()             â”‚                          â”‚
â”‚       â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚       â”‚                           â”‚                                        â”‚
â”‚       â”‚                           â”‚ Wraps                                  â”‚
â”‚       â”‚                           â–¼                                        â”‚
â”‚       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   axiosInstance.ts     â”‚                            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                   â”‚                                        â”‚
â”‚                                   â”‚ Used by                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 4: API LAYER (Endpoint Configuration)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   authApi.ts     â”‚  â”‚ equipmentApi.ts  â”‚  â”‚   userApi.ts     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ login()          â”‚  â”‚ getEquipment()   â”‚  â”‚ getProfile()     â”‚         â”‚
â”‚  â”‚ âœ… Global        â”‚  â”‚ âœ… Scoped        â”‚  â”‚ âœ… Scoped        â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ register()       â”‚  â”‚ getById()        â”‚  â”‚ updateProfile()  â”‚         â”‚
â”‚  â”‚ âœ… Global        â”‚  â”‚ âœ… Scoped        â”‚  â”‚ âœ… Global        â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ logout()         â”‚  â”‚ getFeatured()    â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ âŒ Silent        â”‚  â”‚ âœ… Scoped        â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ refreshToken()   â”‚  â”‚ search()         â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ âŒ Silent        â”‚  â”‚ âœ… Scoped        â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                     â”‚                     â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                 â”‚                                         â”‚
â”‚                                 â”‚ Used by                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 5: REACT QUERY HOOKS (Data Fetching)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   useAuth.ts     â”‚  â”‚useEquipment.ts   â”‚  â”‚   useUser.ts     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ useLogin()       â”‚  â”‚ useEquipmentList()â”‚ â”‚ useProfile()     â”‚         â”‚
â”‚  â”‚   â”‚              â”‚  â”‚   â”‚              â”‚  â”‚   â”‚              â”‚         â”‚
â”‚  â”‚   â”œâ”€ isPending   â”‚  â”‚   â”œâ”€ isLoading   â”‚  â”‚   â”œâ”€ isLoading   â”‚         â”‚
â”‚  â”‚   â””â”€ mutate()    â”‚  â”‚   â”œâ”€ data        â”‚  â”‚   â””â”€ data        â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚   â””â”€ refetch()   â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ useRegister()    â”‚  â”‚                  â”‚  â”‚ useUpdateProfile()â”‚        â”‚
â”‚  â”‚   â”‚              â”‚  â”‚ useEquipmentDetail()â”‚   â”‚              â”‚         â”‚
â”‚  â”‚   â”œâ”€ isPending   â”‚  â”‚   â”‚              â”‚  â”‚   â”œâ”€ isPending   â”‚         â”‚
â”‚  â”‚   â””â”€ mutate()    â”‚  â”‚   â”œâ”€ isLoading   â”‚  â”‚   â””â”€ mutate()    â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚   â””â”€ data        â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ useLogout()      â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚   â””â”€ mutate()    â”‚  â”‚ useFeaturedEquip()â”‚ â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚   â””â”€ isLoading   â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                     â”‚                     â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                 â”‚                                         â”‚
â”‚                                 â”‚ Used in                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LAYER 6: PAGE COMPONENTS (User Interface)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  LoginPage.tsx   â”‚  â”‚   BuyPage.tsx    â”‚  â”‚ ContactPage.tsx  â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ const { mutate,  â”‚  â”‚ const { data,    â”‚  â”‚ const { mutate,  â”‚         â”‚
â”‚  â”‚   isPending }    â”‚  â”‚   isLoading }    â”‚  â”‚   isPending }    â”‚         â”‚
â”‚  â”‚   = useLogin()   â”‚  â”‚   = useEquipment()â”‚ â”‚   = useContact() â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ <Button          â”‚  â”‚ {isLoading && (  â”‚  â”‚ <Button          â”‚         â”‚
â”‚  â”‚   isLoading=     â”‚  â”‚   <SkeletonCard />â”‚ â”‚   isLoading=     â”‚         â”‚
â”‚  â”‚   {isPending}>   â”‚  â”‚ )}               â”‚  â”‚   {isPending}>   â”‚         â”‚
â”‚  â”‚   Submit         â”‚  â”‚                  â”‚  â”‚   Send           â”‚         â”‚
â”‚  â”‚ </Button>        â”‚  â”‚ {data && (       â”‚  â”‚ </Button>        â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚   <EquipmentCard/>â”‚ â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚ )}               â”‚  â”‚                  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA FLOW                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


USER ACTION                    API CALL                    LOADER DISPLAY
â•â•â•â•â•â•â•â•â•â•â•                   â•â•â•â•â•â•â•â•â•â•â•                  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   [Click                         â”‚                              â”‚
   Submit]                        â”‚                              â”‚
     â”‚                            â”‚                              â”‚
     â–¼                            â”‚                              â”‚
  Component                       â”‚                              â”‚
  calls                           â”‚                              â”‚
  mutation.mutate()               â”‚                              â”‚
     â”‚                            â”‚                              â”‚
     â–¼                            â”‚                              â”‚
  React Query                     â”‚                              â”‚
  executes                        â”‚                              â”‚
  mutationFn                      â”‚                              â”‚
     â”‚                            â”‚                              â”‚
     â–¼                            â”‚                              â”‚
  Calls API                       â”‚                              â”‚
  (e.g., authApi.login())         â”‚                              â”‚
     â”‚                            â”‚                              â”‚
     â–¼                            â”‚                              â”‚
  axios.post()                    â”‚                              â”‚
  with loader config              â”‚                              â”‚
     â”‚                            â”‚                              â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚                              â”‚
     â”‚                         REQUEST                           â”‚
     â”‚                       INTERCEPTOR                         â”‚
     â”‚                            â”‚                              â”‚
     â”‚                            â”œâ”€â”€â–º Generate Request ID       â”‚
     â”‚                            â”‚                              â”‚
     â”‚                            â”œâ”€â”€â–º dispatch(startRequest({  â”‚
     â”‚                            â”‚      id: "req-123",          â”‚
     â”‚                            â”‚      namespace: "auth",      â”‚
     â”‚                            â”‚      type: "global"          â”‚
     â”‚                            â”‚    }))                       â”‚
     â”‚                            â”‚                              â”‚
     â”‚                            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â–º
     â”‚                            â”‚    â”‚                         â”‚    Redux
     â”‚                            â”‚    â”‚                         â”‚    updates
     â”‚                            â”‚    â”‚                         â”‚    state
     â”‚                            â”‚    â”‚                         â”‚
     â”‚                            â”‚    â”‚                         â”œâ”€â”€â”€â”€â–º
     â”‚                            â”‚    â”‚                         â”‚   GlobalLoader
     â”‚                            â”‚    â”‚                         â”‚   reads state
     â”‚                            â–¼    â”‚                         â”‚   and shows
     â”‚                      Network    â”‚                         â”‚   loader
     â”‚                      Request    â”‚                         â”‚
     â”‚                         ...     â”‚                         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                         ...     â”‚                         â”‚   â”‚ LOADER â”‚
     â”‚                         ...     â”‚                         â”‚   â”‚ VISIBLEâ”‚
     â”‚                      Response   â”‚                         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                            â”‚    â”‚                         â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚                         â”‚
     â”‚                         RESPONSEâ”‚                         â”‚
     â”‚                       INTERCEPTOR                         â”‚
     â”‚                            â”‚    â”‚                         â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”¼â”€â”€â–º Get Request ID       â”‚
     â”‚                            â”‚    â”‚                         â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”¼â”€â”€â–º dispatch(endRequest( â”‚
     â”‚                            â”‚    â”‚      "req-123"          â”‚
     â”‚                            â”‚    â”‚    ))                   â”‚
     â”‚                            â”‚    â”‚                         â”‚
     â”‚                            â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â–º
     â”‚                            â”‚                              â”‚    Redux
     â”‚                            â”‚                              â”‚    updates
     â”‚                            â”‚                              â”‚    state
     â”‚                            â”‚                              â”‚
     â”‚                            â”‚                              â”œâ”€â”€â”€â”€â–º
     â”‚                            â”‚                              â”‚   GlobalLoader
     â”‚                            â”‚                              â”‚   reads state
     â”‚                            â”‚                              â”‚   and hides
     â”‚                            â”‚                              â”‚
     â”‚                            â”‚                              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                            â”‚                              â”‚   â”‚ LOADER â”‚
     â”‚                            â”‚                              â”‚   â”‚ HIDDEN â”‚
     â”‚                            â”‚                              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â–¼                            â–¼                              â–¼
  React Query                  Component                    User sees
  onSuccess                    re-renders                   result
  callback                     with data

  [Navigation
  or Toast]
```

---

## Loader Type Decision Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOADER TYPE DECISION FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                            API Call Initiated
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Is authentication flow?   â”‚
                    â”‚ (login, register, etc.)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                      YES              NO
                       â”‚                 â”‚
                       â–¼                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ GLOBAL LOADER  â”‚  â”‚ Is critical action? â”‚
              â”‚                â”‚  â”‚ (delete account,    â”‚
              â”‚ â€¢ Blocks UI    â”‚  â”‚  payment, etc.)     â”‚
              â”‚ â€¢ Full page    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ â€¢ With message â”‚             â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   YES              NO
                                    â”‚                 â”‚
                                    â–¼                 â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ GLOBAL LOADER  â”‚  â”‚ Is data fetching?    â”‚
                           â”‚                â”‚  â”‚ (list, cards, etc.)  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                YES              NO
                                                 â”‚                 â”‚
                                                 â–¼                 â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Initial page load?  â”‚  â”‚ Is form submit?  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚                       â”‚
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    YES              NO      YES              NO
                                     â”‚                 â”‚      â”‚                 â”‚
                                     â–¼                 â–¼      â–¼                 â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   SKELETON   â”‚  â”‚   SECTION    â”‚  â”‚  BUTTON  â”‚  â”‚  SILENT  â”‚
                           â”‚   LOADER     â”‚  â”‚   LOADER     â”‚  â”‚ LOADING  â”‚  â”‚ (NONE)   â”‚
                           â”‚              â”‚  â”‚              â”‚  â”‚          â”‚  â”‚          â”‚
                           â”‚ â€¢ Placeholderâ”‚  â”‚ â€¢ Overlay    â”‚  â”‚ â€¢ Spinnerâ”‚  â”‚ â€¢ Token  â”‚
                           â”‚ â€¢ Content    â”‚  â”‚ â€¢ On section â”‚  â”‚ â€¢ Disableâ”‚  â”‚   refreshâ”‚
                           â”‚   shaped     â”‚  â”‚ â€¢ Refresh    â”‚  â”‚          â”‚  â”‚ â€¢ Heartbtâ”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                    EXAMPLES:

                    Global:                 Skeleton:               Button:             Silent:
                    â€¢ Login                 â€¢ Equipment list        â€¢ Submit form       â€¢ Token refresh
                    â€¢ Register              â€¢ Featured items        â€¢ Contact form      â€¢ Analytics
                    â€¢ Delete account        â€¢ Search results        â€¢ Update profile    â€¢ Auto-save
                    â€¢ Payment               â€¢ Dashboard cards       â€¢ Add to cart       â€¢ Heartbeat
```

---

## Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPONENT HIERARCHY                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


App.tsx
â”œâ”€ <Provider store={store}>
â”‚  â”œâ”€ <ReactQueryProvider>
â”‚  â”‚  â”œâ”€ <ThemeProvider>
â”‚  â”‚  â”‚  â”œâ”€ <GlobalLoader />          â—„â”€â”€â”€ Reads: state.loader.isGlobalLoading
â”‚  â”‚  â”‚  â”œâ”€ <AppRoutes>
â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /login
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ <LoginPage>
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ useLogin()       â—„â”€â”€â”€ Provides: isPending
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ <Button
â”‚  â”‚  â”‚  â”‚  â”‚          isLoading={isPending}>
â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /buy
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ <BuyPage>
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ useEquipmentList() â—„â”€â”€â”€ Provides: isLoading, data
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ {isLoading && (
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚    <SkeletonCard />
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚  )}
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ {data && (
â”‚  â”‚  â”‚  â”‚  â”‚          <EquipmentCard />
â”‚  â”‚  â”‚  â”‚  â”‚        )}
â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ <HomePage>
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ useFeaturedEquipment() â—„â”€â”€â”€ Provides: isLoading, data
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ {isLoading && (
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚    <SkeletonCard />
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚  )}
â”‚  â”‚  â”‚  â”‚  â”‚     â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ {data && (
â”‚  â”‚  â”‚  â”‚  â”‚          <ProductCard />
â”‚  â”‚  â”‚  â”‚  â”‚        )}
â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ /contact
â”‚  â”‚  â”‚  â”‚     â””â”€ <ContactPage>
â”‚  â”‚  â”‚  â”‚        â”œâ”€ useContactMutation() â—„â”€â”€â”€ Provides: isPending
â”‚  â”‚  â”‚  â”‚        â””â”€ <Button
â”‚  â”‚  â”‚  â”‚             isLoading={isPending}>
â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ <Toaster />
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ <ReactQueryDevtools />
â”‚  â”‚
â”‚  â””â”€ Redux DevTools (browser extension)
â”‚
â””â”€ setupApiLoaderInterceptor()  â—„â”€â”€â”€ Called in main.tsx BEFORE rendering
```

---

## State Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         STATE FLOW                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


REDUX STORE (loaderSlice)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Initial State:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ {                                 â”‚
  â”‚   isGlobalLoading: false,         â”‚
  â”‚   globalMessage: null,            â”‚
  â”‚   activeRequests: {},             â”‚
  â”‚   requestCountByNamespace: {},    â”‚
  â”‚   scopedLoaders: {}               â”‚
  â”‚ }                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  API Call Started:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ dispatch(startRequest({           â”‚
  â”‚   id: "auth-123",                 â”‚
  â”‚   namespace: "auth",              â”‚
  â”‚   type: "global"                  â”‚
  â”‚ }))                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
  State Updates:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ {                                 â”‚
  â”‚   isGlobalLoading: true, â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ GlobalLoader reads this
  â”‚   globalMessage: "Logging in...", â”‚
  â”‚   activeRequests: {               â”‚
  â”‚     "auth-123": {                 â”‚
  â”‚       id: "auth-123",             â”‚
  â”‚       namespace: "auth",          â”‚
  â”‚       type: "global",             â”‚
  â”‚       startTime: 1234567890       â”‚
  â”‚     }                             â”‚
  â”‚   },                              â”‚
  â”‚   requestCountByNamespace: {      â”‚
  â”‚     "auth": 1                     â”‚
  â”‚   },                              â”‚
  â”‚   scopedLoaders: {}               â”‚
  â”‚ }                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  API Call Completed:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ dispatch(endRequest("auth-123"))  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
  State Updates:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ {                                 â”‚
  â”‚   isGlobalLoading: false, â—„â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ GlobalLoader reads this
  â”‚   globalMessage: null,            â”‚
  â”‚   activeRequests: {},             â”‚
  â”‚   requestCountByNamespace: {      â”‚
  â”‚     "auth": 0                     â”‚
  â”‚   },                              â”‚
  â”‚   scopedLoaders: {}               â”‚
  â”‚ }                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


CONCURRENT REQUESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Two API calls at same time:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ dispatch(startRequest({           â”‚
  â”‚   id: "equipment-list-456",       â”‚
  â”‚   namespace: "equipment",         â”‚
  â”‚   type: "scoped"                  â”‚
  â”‚ }))                               â”‚
  â”‚                                   â”‚
  â”‚ dispatch(startRequest({           â”‚
  â”‚   id: "featured-789",             â”‚
  â”‚   namespace: "equipment",         â”‚
  â”‚   type: "scoped"                  â”‚
  â”‚ }))                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
  State:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ {                                 â”‚
  â”‚   isGlobalLoading: false,         â”‚
  â”‚   activeRequests: {               â”‚
  â”‚     "equipment-list-456": {...},  â”‚
  â”‚     "featured-789": {...}         â”‚
  â”‚   },                              â”‚
  â”‚   requestCountByNamespace: {      â”‚
  â”‚     "equipment": 2  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ Components can check this
  â”‚   }                               â”‚
  â”‚ }                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  First request completes:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ dispatch(endRequest(              â”‚
  â”‚   "equipment-list-456"            â”‚
  â”‚ ))                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
  State:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ {                                 â”‚
  â”‚   activeRequests: {               â”‚
  â”‚     "featured-789": {...}         â”‚
  â”‚   },                              â”‚
  â”‚   requestCountByNamespace: {      â”‚
  â”‚     "equipment": 1  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ Still loading!
  â”‚   }                               â”‚
  â”‚ }                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Second request completes:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ dispatch(endRequest("featured-789"))â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
  State:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ {                                 â”‚
  â”‚   activeRequests: {},             â”‚
  â”‚   requestCountByNamespace: {      â”‚
  â”‚     "equipment": 0  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ All done!
  â”‚   }                               â”‚
  â”‚ }                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure

```
src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ axiosInstance.ts           â—„â”€â”€â”€ Base axios config
â”‚   â”œâ”€â”€ authApi.ts                 â—„â”€â”€â”€ Auth endpoints with loader config
â”‚   â”œâ”€â”€ equipmentApi.ts            â—„â”€â”€â”€ Equipment endpoints (NEW)
â”‚   â”œâ”€â”€ userApi.ts                 â—„â”€â”€â”€ User endpoints
â”‚   â”œâ”€â”€ dashboardApi.ts            â—„â”€â”€â”€ Dashboard endpoints
â”‚   â””â”€â”€ index.ts                   â—„â”€â”€â”€ Barrel export
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ Loader/
â”‚       â”œâ”€â”€ GlobalLoader.tsx       â—„â”€â”€â”€ Full-page loader
â”‚       â”œâ”€â”€ SkeletonLoader.tsx     â—„â”€â”€â”€ Content placeholders
â”‚       â”œâ”€â”€ SectionLoader.tsx      â—„â”€â”€â”€ Section overlay
â”‚       â”œâ”€â”€ InlineSpinner.tsx      â—„â”€â”€â”€ Small spinner
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useLoader.ts               â—„â”€â”€â”€ Loader hooks
â”‚   â”‚   â”œâ”€â”€ useGlobalLoader()
â”‚   â”‚   â”œâ”€â”€ useScopedLoader()
â”‚   â”‚   â”œâ”€â”€ useApiLoader()
â”‚   â”‚   â””â”€â”€ useAsyncLoader()
â”‚   â”‚
â”‚   â””â”€â”€ queries/
â”‚       â”œâ”€â”€ useAuth.ts             â—„â”€â”€â”€ Auth React Query hooks
â”‚       â”œâ”€â”€ useEquipment.ts        â—„â”€â”€â”€ Equipment hooks (NEW)
â”‚       â”œâ”€â”€ useUser.ts             â—„â”€â”€â”€ User hooks
â”‚       â”œâ”€â”€ useDashboard.ts        â—„â”€â”€â”€ Dashboard hooks
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ index.ts                   â—„â”€â”€â”€ Redux store config
â”‚   â””â”€â”€ loaderSlice.ts             â—„â”€â”€â”€ Loader state management
â”‚       â”œâ”€â”€ State
â”‚       â”œâ”€â”€ Actions
â”‚       â””â”€â”€ Selectors
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ apiLoaderInterceptor.ts    â—„â”€â”€â”€ Axios interceptor logic
â”‚       â”œâ”€â”€ setupApiLoaderInterceptor()
â”‚       â”œâ”€â”€ enableGlobalLoader()
â”‚       â”œâ”€â”€ disableLoader()
â”‚       â””â”€â”€ withLoader()
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx          â—„â”€â”€â”€ Uses button loading
â”‚   â”‚   â”œâ”€â”€ RegisterPage.tsx       â—„â”€â”€â”€ Uses button loading
â”‚   â”‚   â”œâ”€â”€ ForgotPasswordPage.tsx â—„â”€â”€â”€ Uses button loading
â”‚   â”‚   â””â”€â”€ ResetPasswordPage.tsx  â—„â”€â”€â”€ Uses button loading
â”‚   â”‚
â”‚   â””â”€â”€ public/
â”‚       â”œâ”€â”€ HomePage.tsx           â—„â”€â”€â”€ Uses skeleton for featured
â”‚       â”œâ”€â”€ BuyPage.tsx            â—„â”€â”€â”€ Uses skeleton for list
â”‚       â”œâ”€â”€ BuyNowDetailsPage.tsx  â—„â”€â”€â”€ Uses skeleton for detail
â”‚       â”œâ”€â”€ SellPage.tsx           â—„â”€â”€â”€ Uses button loading
â”‚       â””â”€â”€ ContactUsPage.tsx      â—„â”€â”€â”€ Uses button loading
â”‚
â””â”€â”€ main.tsx                       â—„â”€â”€â”€ Setup interceptor HERE
```

---

## Summary

### Key Concepts

1. **Automatic Tracking**: API interceptor automatically tracks all requests
2. **Centralized State**: Redux store manages all loader states
3. **Component Flexibility**: Components choose which loader type to display
4. **Type Safety**: TypeScript ensures correct usage
5. **Performance**: Minimum display times prevent flicker

### Integration Points

1. **main.tsx**: Setup interceptor (one line of code)
2. **API files**: Configure loader per endpoint
3. **React Query hooks**: Provide loading states
4. **Page components**: Display appropriate loaders
5. **Redux store**: Manage global state

### Data Flow

```
User Action â†’ React Query â†’ API Call â†’ Interceptor â†’ Redux â†’ Component â†’ UI
```

---

**This architecture ensures:**

- âœ… Consistent loading experience
- âœ… Automatic loader management
- âœ… No manual cleanup needed
- âœ… Type-safe implementation
- âœ… Easy to maintain and extend

---

**Last Updated:** 2026-01-24  
**Status:** Production-Ready Architecture âœ…
